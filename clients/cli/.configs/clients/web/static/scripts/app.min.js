const createConfig=(method,params)=>({method:method,headers:{accept:"application/json","content-type":"application/json"},body:JSON.stringify(params)});class Component{constructor(){this.state={}}emit(event,data){window.dispatchEvent(new CustomEvent(event,{detail:{output:data}}))}getState(key){return this.state[key]}on(event,fn){window.addEventListener(event,e=>{fn(e.detail.output)})}setState(key,val){this.state[key]=val}}class Model extends Component{constructor(){super(),this.on("Status",async params=>{let config=createConfig("POST",params);fetch("http://127.0.0.1:3080/status",config).then(response=>response.json()).then(data=>{this.emit("Status done",data)}).catch(err=>{this.emit("Status error",err)})})}}class ViewModel extends Component{constructor(){super(),this.on("Status done",data=>{this.setState("Status result",data)})}Status(data){this.emit("Status",data)}}class View extends Component{constructor(viewModel){super(),this.viewModel=viewModel,this.on("Status done",data=>{this.render()}),this.on("Status error",err=>{this.render()}),this.render()}render(){let obj=this.viewModel.getState("Status result");void 0===obj&&(obj={text:"default here"}),document.querySelector("#app").innerHTML="<p>Status: "+obj.text+"</p>",gsap.from("#app",{duration:.33,opacity:0}),gsap.to("#app",{duration:.33,y:-50}),document.querySelector("#app").addEventListener("click",evt=>{evt.preventDefault()})}}const model=new Model,viewModel=new ViewModel,view=new View(viewModel);